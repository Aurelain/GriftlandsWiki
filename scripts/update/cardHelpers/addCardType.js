const assert = require('assert');

// =====================================================================================================================
//  D E C L A R A T I O N S
// =====================================================================================================================
const FLAG_TO_TYPE = {
    status: 'Status',
    skill: 'Maneuver',
    ranged: 'Attack',
    melee: 'Attack',
    score: 'Score',
    item: 'Item',
    manipulate: 'Manipulate',
    hostile: 'Hostility',
    diplomacy: 'Diplomacy',
    parasite: 'Parasite',
};

// =====================================================================================================================
//  P U B L I C
// =====================================================================================================================
/**
 *
 */
const addCardType = (card) => {
    const {flags, id} = card;
    assert(flags, `${id} is missing its flags!`);
    const types = [];
    for (const flag of flags) {
        if (flag in FLAG_TO_TYPE) {
            types.push(flag);
        }
    }
    if (types.length !== 1 && id === 'crass') {
        console.log('card:', card);
        console.log('card:', `${id} has an unexpected type! ${types}`);
    }
    // assert(types.length === 1, `${id} has an unexpected type! ${types}`);
};

// =====================================================================================================================
//  P R I V A T E
// =====================================================================================================================

// =====================================================================================================================
//  E X P O R T
// =====================================================================================================================
module.exports = addCardType;
